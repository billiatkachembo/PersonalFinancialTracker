import{t as useToast,j as jsxRuntimeExports}from"./index-CsFIVyTN.js";import{r as reactExports}from"./vendor-BgKluMRn.js";import{B as Button}from"./button-DsPSxjjs.js";import{I as Input}from"./input-BCy5uUby.js";import{L as Label}from"./label-DcFav8md.js";import{T as Textarea}from"./textarea-B8zYRrfD.js";import{u as useCurrency,S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem,P as Plus}from"./Index-B5rmGJgG.js";import{u as useLanguage}from"./useLanguage-C7eAUMgS.js";import{C as Calculator}from"./calculator-CaSivRoA.js";import"./Spinner-Csv4KNU-.js";const categories={Education:[{value:"education-tuition",label:"ðŸŽ“ Tuition"},{value:"education-books",label:"ðŸ“š Books & Supplies"},{value:"education-online",label:"ðŸ–¥ï¸ Online Courses"}],Food:[{value:"food-groceries",label:"ðŸ›’ Groceries"},{value:"food-restaurants",label:"ðŸ½ï¸ Restaurants"},{value:"food-coffee",label:"â˜• Coffee"}],Transportation:[{value:"transport-fuel",label:"â›½ Fuel"},{value:"transport-public",label:"ðŸšŒ Public Transport"},{value:"transport-ride",label:"ðŸš• Ride Share"}],Healthcare:[{value:"health-doctor",label:"ðŸ©º Doctor Visits"},{value:"health-pharmacy",label:"ðŸ’Š Pharmacy"},{value:"health-insurance",label:"ðŸ›¡ï¸ Insurance"}],Entertainment:[{value:"movies",label:"ðŸŽ¬ Movies"},{value:"games",label:"ðŸŽ® Games"},{value:"events",label:"ðŸŽŸï¸ Events"},{value:"music",label:"ðŸŽµ Music"}],Beauty:[{value:"beauty-salon",label:"ðŸ’‡ Salon"},{value:"beauty-cosmetics",label:"ðŸ’„ Cosmetics"},{value:"beauty-spa",label:"ðŸ§– Spa & Wellness"},{value:"beauty-other",label:"ðŸ’… Other Beauty"}],Social:[{value:"social-gifts",label:"ðŸŽ Gifts"},{value:"social-donations",label:"ðŸ™ Donations"},{value:"social-events",label:"ðŸŽ‰ Events & Parties"},{value:"social-other",label:"ðŸ”– Other Social"}],Other:[{value:"other-misc",label:"ðŸ”– Miscellaneous"}]},ExpenseForm=({onSubmit})=>{const[formData,setFormData]=reactExports.useState({date:new Date().toISOString().split("T")[0],amount:0,category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),[isCalculatorOpen,setIsCalculatorOpen]=reactExports.useState(!1),[calcExpression,setCalcExpression]=reactExports.useState(""),{toast}=useToast(),{t}=useLanguage(),{currencies,currency}=useCurrency(),repeatOptions=[{value:"one-time",label:t("oneTime")||"One-time"},{value:"daily",label:t("daily")||"Daily"},{value:"weekly",label:t("weekly")||"Weekly"},{value:"monthly",label:t("monthly")||"Monthly"},{value:"yearly",label:t("yearly")||"Yearly"}],handleInputChange=(e,a)=>{setFormData(s=>({...s,[e]:a}))},handleCalcInput=char=>{if(char==="=")try{const result=eval(calcExpression||formData.amount.toString());handleInputChange("amount",parseFloat(result.toString())),setCalcExpression(""),setIsCalculatorOpen(!1)}catch{toast({title:t("error")||"Error",description:t("invalidCalculation")||"Invalid calculation",variant:"destructive"})}else setCalcExpression(char==="C"?"":char==="DEL"?e=>e.slice(0,-1):e=>e+char)};reactExports.useEffect(()=>{if(!isCalculatorOpen)return;const e=a=>{a.key>="0"&&a.key<="9"||["+","-","*","/","."].includes(a.key)?handleCalcInput(a.key):a.key==="Enter"?handleCalcInput("="):a.key==="Escape"?setIsCalculatorOpen(!1):a.key.toLowerCase()==="c"?handleCalcInput("C"):a.key==="Backspace"&&handleCalcInput("DEL")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[isCalculatorOpen,calcExpression]);const handleSubmit=e=>{if(e.preventDefault(),!formData.amount||!formData.category||!formData.description){toast({title:t("error")||"Error",description:t("fillAllFields")||"Please fill in all required fields",variant:"destructive"});return}if(formData.amount<=0){toast({title:t("error")||"Error",description:t("amountGreaterThanZero")||"Amount must be greater than 0",variant:"destructive"});return}if(formData.repeat!=="one-time"&&(!formData.repeatStart||!formData.repeatEnd)){toast({title:t("error")||"Error",description:t("repeatStartEndRequired")||"Please provide both repeat start and end dates",variant:"destructive"});return}onSubmit(formData),setFormData({date:new Date().toISOString().split("T")[0],amount:0,category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),setCalcExpression(""),toast({title:t("success")||"Success",description:t("expenseAdded")||"Expense added successfully!",variant:"default"})};return jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expense-date",children:t("date")||"Date"}),jsxRuntimeExports.jsx(Input,{id:"expense-date",type:"date",value:formData.date,onChange:e=>handleInputChange("date",e.target.value),className:"shadow-soft"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"expense-amount",children:[t("amount")||"Amount"," (",currencies[currency].symbol,") *"]}),jsxRuntimeExports.jsxs("div",{className:"flex relative",children:[jsxRuntimeExports.jsx(Input,{id:"expense-amount",type:"number",step:"0.01",min:"0",value:calcExpression||formData.amount||"",onChange:e=>handleInputChange("amount",parseFloat(e.target.value)),placeholder:"0.00",className:"shadow-soft pr-10"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>setIsCalculatorOpen(!isCalculatorOpen),className:"absolute right-0 top-1/2 -translate-y-1/2",children:jsxRuntimeExports.jsx(Calculator,{className:"h-6 w-7 text-muted-foreground"})})]}),isCalculatorOpen&&jsxRuntimeExports.jsxs("div",{className:"inline top-16 right-10 w-64 p-2 rounded-lg shadow-md bg-background text-foreground z-50",children:[jsxRuntimeExports.jsx("div",{className:"mb-2 text-right font-mono select-none border-b-2 pb-1 border-gray-200",children:calcExpression||formData.amount||"0"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 gap-1",children:["7","8","9","+","4","5","6","-","1","2","3","*","0",".","=","/","C","DEL"].map(e=>jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>handleCalcInput(e),children:e},e))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"expense-category",children:[t("category")," *"]}),jsxRuntimeExports.jsxs(Select,{value:formData.category,onValueChange:e=>handleInputChange("category",e),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:t("selectCategory")})}),jsxRuntimeExports.jsx(SelectContent,{className:"space-y-2 p-2 max-h-[300px] overflow-auto",children:Object.entries(categories).map(([e,a])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-muted-foreground px-3 py-1 uppercase",children:t(e)}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(({value:s,label:r})=>jsxRuntimeExports.jsx(SelectItem,{value:s,children:t(r)||r},s))})]},e))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expense-account",children:t("account")||"Account"}),jsxRuntimeExports.jsxs(Select,{value:formData.account,onValueChange:e=>handleInputChange("account",e),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:t("selectAccount")||"Select account"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsxs(SelectItem,{value:"Cash",children:["ðŸ’µ ",t("Cash")||"Cash"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Bank",children:["ðŸ¦ ",t("Bank")||"Bank"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Credit Card",children:["ðŸ’³ ",t("Credit Card")||"Credit Card"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Debit Card",children:["ðŸ§ ",t("Debit Card")||"Debit Card"]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Mobile Money",children:["ðŸ“± ",t("Mobile Money")||"Mobile Money"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expense-repeat",children:t("repeat")||"Repeat"}),jsxRuntimeExports.jsxs(Select,{value:formData.repeat,onValueChange:e=>handleInputChange("repeat",e),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:t("repeatFrequency")||"Repeat frequency"})}),jsxRuntimeExports.jsx(SelectContent,{children:repeatOptions.map(({value:e,label:a})=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:a},e))})]})]})]}),formData.repeat!=="one-time"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"repeat-start",children:[t("repeatStart")||"Repeat Start"," *"]}),jsxRuntimeExports.jsx(Input,{id:"repeat-start",type:"date",value:formData.repeatStart,onChange:e=>handleInputChange("repeatStart",e.target.value),className:"shadow-soft"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"repeat-end",children:[t("repeatEnd")||"Repeat End"," *"]}),jsxRuntimeExports.jsx(Input,{id:"repeat-end",type:"date",value:formData.repeatEnd,onChange:e=>handleInputChange("repeatEnd",e.target.value),className:"shadow-soft"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"expense-description",children:[t("description")||"Description"," *"]}),jsxRuntimeExports.jsx(Textarea,{id:"expense-description",value:formData.description,onChange:e=>handleInputChange("description",e.target.value),placeholder:t("expensePlaceholder")||"What did you spend on?",className:"shadow-soft",rows:3})]}),jsxRuntimeExports.jsxs(Button,{type:"submit",variant:"expense",className:"w-full",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),t("addExpense")]})]})};export{ExpenseForm};

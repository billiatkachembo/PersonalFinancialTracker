import{c as createLucideIcon,t as useToast,j as jsxRuntimeExports}from"./index-CXfqqSNR.js";import{r as reactExports}from"./vendor-BgKluMRn.js";import{B as Button}from"./button-CH5IRsWw.js";import{I as Input}from"./input-9izpb35h.js";import{L as Label}from"./label-vhsLl4TI.js";import{T as Textarea}from"./textarea-BZKzJdWt.js";import{u as useCurrency,S as Select,a as SelectTrigger,b as SelectValue,c as SelectContent,d as SelectItem,P as Plus}from"./Index-Ck3c8dIX.js";import{u as useLanguage}from"./useLanguage-CzxK3kxw.js";import{C as Calculator}from"./calculator-BA2xVpzR.js";import"./Spinner-y3XzBHul.js";const Tag=createLucideIcon("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),incomeSourceOptions=[{value:"salary",label:"Salary",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"bonus",label:"Bonus",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"business",label:"Business",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"investment",label:"Investment",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"rental",label:"Rental Income",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"freelance",label:"Freelance",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"gift",label:"Gift",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"allowance",label:"Allowance",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"refund",label:"Refund",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"dividend",label:"Dividend",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"other",label:"Other",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"savings",label:"Savings",icon:jsxRuntimeExports.jsx(Tag,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})}],repeatOptions=[{value:"one-time",label:"One-time"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],IncomeForm=({onSubmit})=>{const[formData,setFormData]=reactExports.useState({date:new Date().toISOString().split("T")[0],amount:0,source:"",category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),[isCalculatorOpen,setIsCalculatorOpen]=reactExports.useState(!1),[calcExpression,setCalcExpression]=reactExports.useState(""),{toast}=useToast(),{t}=useLanguage(),{currencies,currency}=useCurrency(),handleInputChange=(e,s)=>{setFormData(a=>({...a,[e]:s}))},handleSubmit=e=>{if(e.preventDefault(),!formData.amount||!formData.source||!formData.description){toast({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(formData.amount<=0){toast({title:"Error",description:"Amount must be greater than 0",variant:"destructive"});return}if(formData.repeat!=="one-time"&&(!formData.repeatStart||!formData.repeatEnd)){toast({title:"Error",description:"Please provide both repeat start and end dates",variant:"destructive"});return}onSubmit(formData),setFormData({date:new Date().toISOString().split("T")[0],amount:0,source:"",category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),setCalcExpression(""),setIsCalculatorOpen(!1),toast({title:"Success",description:"Income added successfully!",variant:"default"})},handleCalcInput=char=>{if(char==="=")try{const result=eval(calcExpression||formData.amount.toString());handleInputChange("amount",parseFloat(result.toString())),setCalcExpression(""),setIsCalculatorOpen(!1)}catch{toast({title:"Error",description:"Invalid calculation",variant:"destructive"})}else setCalcExpression(char==="C"?"":char==="DEL"?e=>e.slice(0,-1):e=>e+char)};return reactExports.useEffect(()=>{if(!isCalculatorOpen)return;const e=s=>{s.key>="0"&&s.key<="9"||["+","-","*","/","."].includes(s.key)?handleCalcInput(s.key):s.key==="Enter"?handleCalcInput("="):s.key==="Escape"?setIsCalculatorOpen(!1):s.key.toLowerCase()==="c"?handleCalcInput("C"):s.key==="Backspace"&&handleCalcInput("DEL")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[isCalculatorOpen,calcExpression]),jsxRuntimeExports.jsxs("form",{onSubmit:handleSubmit,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"income-date",children:"Date"}),jsxRuntimeExports.jsx(Input,{id:"income-date",type:"date",value:formData.date,onChange:e=>handleInputChange("date",e.target.value),className:"shadow-soft"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"income-amount",children:["Amount (",currencies[currency].symbol,") *"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Input,{id:"income-amount",type:"number",step:"0.01",min:"0",value:calcExpression||formData.amount||"",onChange:e=>handleInputChange("amount",parseFloat(e.target.value)),placeholder:"0.00",className:"shadow-soft flex-1"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>setIsCalculatorOpen(!isCalculatorOpen),children:jsxRuntimeExports.jsx(Calculator,{className:"h-4 w-4 text-muted-foreground"})})]}),isCalculatorOpen&&jsxRuntimeExports.jsxs("div",{className:"inline top-16 right-10 w-64 p-2 rounded-lg shadow-md bg-background text-foreground z-50",children:[jsxRuntimeExports.jsx("div",{className:"mb-2 text-right font-mono select-none border-b-2 pb-1 border-gray-200",children:calcExpression||formData.amount}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 gap-1",children:["7","8","9","+","4","5","6","-","1","2","3","*","0",".","=","/","C","DEL"].map(e=>jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>handleCalcInput(e),children:e},e))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"income-source",children:"Source *"}),jsxRuntimeExports.jsxs(Select,{value:formData.source,onValueChange:e=>handleInputChange("source",e),required:!0,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select income source"})}),jsxRuntimeExports.jsx(SelectContent,{className:"space-y-2 p-2 max-h-[300px] overflow-auto",children:incomeSourceOptions.map(({value:e,label:s,icon:a})=>jsxRuntimeExports.jsxs(SelectItem,{value:e,className:"flex items-center gap-2",children:[a," ",s]},e))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"income-account",children:"account"}),jsxRuntimeExports.jsxs(Select,{value:formData.account,onValueChange:e=>handleInputChange("account",e),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"selectAccount"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsxs(SelectItem,{value:"Cash",children:["ðŸ’µ ",t("cash")]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Savings",children:["ðŸ¦ ",t("savings")]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Bank",children:["ðŸ¦ ",t("bank")]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Credit Card",children:["ðŸ’³ ",t("creditCard")]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Debit Card",children:["ðŸ§ ",t("debitCard")]}),jsxRuntimeExports.jsxs(SelectItem,{value:"Mobile Money",children:["ðŸ“± ",t("mobileMoney")]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"income-repeat",children:"Repeat"}),jsxRuntimeExports.jsxs(Select,{value:formData.repeat,onValueChange:e=>handleInputChange("repeat",e),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"shadow-soft",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Repeat frequency"})}),jsxRuntimeExports.jsx(SelectContent,{children:repeatOptions.map(({value:e,label:s})=>jsxRuntimeExports.jsx(SelectItem,{value:e,children:s},e))})]})]})]}),formData.repeat!=="one-time"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"repeat-start",children:["Repeat Start"," *"]}),jsxRuntimeExports.jsx(Input,{id:"repeat-start",type:"date",value:formData.repeatStart,onChange:e=>handleInputChange("repeatStart",e.target.value),className:"shadow-soft"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"repeat-end",children:["Repeat End"," *"]}),jsxRuntimeExports.jsx(Input,{id:"repeat-end",type:"date",value:formData.repeatEnd,onChange:e=>handleInputChange("repeatEnd",e.target.value),className:"shadow-soft"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"income-description",children:["Description"," *"]}),jsxRuntimeExports.jsx(Textarea,{id:"income-description",value:formData.description,onChange:e=>handleInputChange("description",e.target.value),placeholder:"Where is this income from?",className:"shadow-soft",rows:3})]}),jsxRuntimeExports.jsxs(Button,{type:"submit",variant:"income",className:"w-full",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Add Income"]})]})};export{IncomeForm};

import{c as M,j as e,X as A}from"./index-CsFIVyTN.js";import{r as i}from"./vendor-BgKluMRn.js";import{u as B,a as N,c as v,d as w,e as F,b as j}from"./useLanguage-C7eAUMgS.js";import{B as l}from"./button-DsPSxjjs.js";import{I as p}from"./input-BCy5uUby.js";import{T as C}from"./textarea-B8zYRrfD.js";import{P as S,B as b}from"./Index-B5rmGJgG.js";import{S as H,a as O}from"./square-pen-B0-HT6Dx.js";import{T as z}from"./trash-2-DLaTgvkw.js";import"./Spinner-Csv4KNU-.js";const k=M("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Z=()=>{const[c,d]=i.useState([]),[E,T]=i.useState(!0),[m,o]=i.useState(!1),[h,u]=i.useState(null),[r,n]=i.useState({title:"",content:"",category:""}),{t:s}=B(),y=1e3;i.useEffect(()=>{try{const t=localStorage.getItem("finance-notes");t&&d(JSON.parse(t))}catch(t){console.error("Failed to load notes from localStorage:",t)}T(!1)},[]),i.useEffect(()=>{try{localStorage.setItem("finance-notes",JSON.stringify(c))}catch(t){console.error("Failed to save notes to localStorage:",t)}},[c]),i.useEffect(()=>{const t=a=>{a.key==="Escape"&&(u(null),m&&(o(!1),n({title:"",content:"",category:""})))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[m]);const I=()=>{if(r.title.trim()||r.content.trim()){const t={id:Date.now().toString(),title:r.title.trim()||s("untitled"),content:r.content.trim(),date:new Date().toISOString(),category:r.category.trim()||void 0};d(a=>[t,...a]),n({title:"",content:"",category:""}),o(!1)}},x=(t,a)=>{d(g=>g.map(f=>f.id===t?{...f,...a}:f)),u(null)},L=t=>{window.confirm("Are you sure you want to delete this note?")&&d(a=>a.filter(g=>g.id!==t))},D=t=>new Date(t).toLocaleDateString();return E?e.jsx("div",{className:"flex justify-center p-8",children:"Loading notes..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{className:"shadow-soft",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5","aria-hidden":"true"}),s("notes")]}),e.jsx(F,{children:"Manage your financial notes and reminders"})]}),e.jsx(j,{children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{placeholder:"Note Title",value:r.title,onChange:t=>n(a=>({...a,title:t.target.value})),"aria-label":s("noteTitle")}),e.jsx(p,{placeholder:"Category (optional)",value:r.category,onChange:t=>n(a=>({...a,category:t.target.value})),"aria-label":s("categoryOptional")}),e.jsx(C,{placeholder:"Note Content",value:r.content,onChange:t=>n(a=>({...a,content:t.target.value})),rows:4,"aria-label":s("noteContent")}),r.content.length>y*.8&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.content.length,"/",y," characters"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{onClick:I,children:[e.jsx(H,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),s("save")]}),e.jsxs(l,{variant:"outline",onClick:()=>{o(!1),n({title:"",content:"",category:""})},children:[e.jsx(A,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),s("cancel")]})]})]}):e.jsxs(l,{onClick:()=>o(!0),className:"w-full sm:w-auto flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Add Note"]})})]}),c.length===0&&!m?e.jsx(N,{className:"shadow-soft",children:e.jsxs(j,{className:"text-center py-12",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-4 opacity-50","aria-hidden":"true"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:s("noNotes")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by adding your first note"}),e.jsxs(l,{onClick:()=>o(!0),children:[e.jsx(S,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Create Your First Note"]})]})}):e.jsx("div",{className:"grid gap-4",children:c.map(t=>e.jsxs(N,{className:"shadow-soft",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[h===t.id?e.jsx(p,{defaultValue:t.title,onBlur:a=>x(t.id,{title:a.target.value}),onKeyDown:a=>a.key==="Enter"&&x(t.id,{title:a.currentTarget.value}),autoFocus:!0,"aria-label":s("editNoteTitle")}):e.jsx(w,{className:"text-lg",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(b,{variant:"secondary",children:D(t.date)}),t.category&&e.jsx(b,{variant:"outline",children:t.category})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>u(h===t.id?null:t.id),"aria-label":s("editNote"),children:e.jsx(O,{className:"h-4 w-4","aria-hidden":"true"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>L(t.id),className:"text-destructive hover:text-destructive","aria-label":s("deleteNote"),children:e.jsx(z,{className:"h-4 w-4","aria-hidden":"true"})})]})]})}),e.jsx(j,{children:h===t.id?e.jsx(C,{defaultValue:t.content,onBlur:a=>x(t.id,{content:a.target.value}),rows:4,"aria-label":s("editNoteContent")}):e.jsx("p",{className:"whitespace-pre-wrap",children:t.content})})]},t.id))})]})};export{Z as Notes};
